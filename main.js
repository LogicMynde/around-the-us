!function(){"use strict";class e{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link||e.url,this._cardSelector=t,this._handleImageClick=s,this._isLiked=e.isLiked,this._id=e._id,this._handleDeleteButton=r,this._handleLikeButton=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".el__element").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton(this._id)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton(this._id,this._element)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}isLiked(){return this._isLiked}removeCard(){this._element.remove()}_renderLikedCards(){this._isLiked?this._likeButton.classList.add("element__like-button_active"):this._likeButton.classList.remove("element__like-button_active")}setIsLiked(e){this._isLiked=e,this._renderLikedCards()}generateCard(){return this._element=this._getTemplate(),this._element.querySelector(".element__text").textContent=this._name,this._cardImage=this._element.querySelector(".element__img"),this._cardTitle=this._element.querySelector(".element__text"),this._likeButton=this._element.querySelector(".element__like-button"),this._deleteButton=this._element.querySelector(".element__delete-button"),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._renderLikedCards(),this._setEventListeners(),this._element}}class t{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}_showInputError(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent="",t.classList.remove(this._settings.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_toggleButtonState(){this._inputList.some((e=>!e.validity.valid))?this.disableButton(!0):(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}disableButton(){this._submitButton.classList.contains(this._settings.inactiveButtonClass)||(this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0)}}class s{constructor({nameElement:e,aboutElement:t,avatarElement:s}){this._userName=document.querySelector(e),this._userAbout=document.querySelector(t),this._userAvatar=document.querySelector(s)}setUserInfo(e){this._userName.textContent=e.name,this._userAbout.textContent=e.about}setUserAvatar(e){this._userAvatar.src=e.avatar}getUserInfo(){return{name:this._userName.textContent,job:this._userJob.textContent,avatar:this._userAvatar.src}}}document.querySelector(".profile__title"),document.querySelector(".profile__descr"),document.querySelector(".profile__img");const r=document.querySelector("#element-add-modal"),n=r.querySelector("#element-add-form"),o=document.querySelector("#profile-edit-modal"),i=document.querySelector(".profile__edit-button"),a=document.querySelector("#title-input"),l=document.querySelector("#profile-input"),u=o.querySelector("#profile-edit-form"),d=o.querySelector("#modal-profile-close-button"),c=(document.querySelector("#avatar-input"),document.querySelector("#profile-avatar-modal")),m=(c.querySelector("#profile-avatar-form"),document.querySelector(".profile__avatar-button")),_=document.querySelector("#profile-avatar-close-button"),h=document.querySelector(".profile__add-button"),p=r.querySelector("#element-add-close"),E=document.querySelector(".elements__list"),v=r.querySelector("#element-input"),g=r.querySelector("#image-input"),f=(document.querySelector(".modal__button"),document.querySelector("#element-image-modal").querySelector("#element-image-close"),document.querySelector("#element-modal-image"),document.querySelector("#element-modal-caption"),document.querySelector("#element-confirmation-modal"),document.querySelector("#element-confirmation-button")),L={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class S{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._parentContainer=s}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._parentContainer.prepend(e)}}class k{constructor(e){let t=null;"string"==typeof e?t=e:e&&"object"==typeof e&&e.popupSelector&&(t=e.popupSelector),this._popupElement=t?document.querySelector(t):null,this._handleEscClose=this._handleEscClose.bind(this),this._popupElement||console.error(`Popup element for selector "${t}" not found!`)}open(){this._popupElement?(console.log("popup opened!"),this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)):console.warn("Attempted to open a Popup but the element was not found. Skipping open().")}close(){this._popupElement?(console.log("popup closed!"),this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)):console.warn("Attempted to close a Popup but the element was not found. Skipping close().")}setEventListeners(){this._popupElement?this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close(e.currentTarget)})):console.warn("setEventListeners() called but popup element was not found.")}_handleEscClose(e){"Escape"===e.key&&(console.log("Popup closed via Escape Button!"),this.close())}}class b extends k{constructor(e,t){super({popupSelector:e}),this._formElement=this._popupElement.querySelector(".modal__form"),this._formInputs=this._formElement.querySelectorAll(".modal__input"),this._handleFormSubmit=t}close(){super.close()}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}_submitForm=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._formElement.reset()};setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",this._submitForm)}renderLoading(e,t="Saving..."){const s=this._popupElement.querySelector(".modal__button");e?(this._buttonText=s.textContent,s.textContent=t,s.disabled=!0):(s.textContent=this._buttonText,s.disabled=!1)}resetForm(){this._formElement.reset()}}class y extends k{constructor(e){super({popupSelector:e}),this._imageTitle=this._popupElement.querySelector(".modal__caption-element"),this._imageModalView=this._popupElement.querySelector(".modal__image-element")}open(e,t){this._imageModalView.src=t,this._imageModalView.alt=e,this._imageTitle.textContent=e,super.open()}}class q{constructor(e){this._baseUrl=e.baseUrl,this._authToken=e.authorization}_makeRequest(e,t,s=null){const r={method:t.toUpperCase(),headers:{authorization:this._authToken}};return s&&(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(s)),fetch(`${this._baseUrl}${e}`,r).then((e=>e.ok?e.json():e.json().then((t=>Promise.reject({status:e.status,message:t.message||t,data:t}))).catch((()=>Promise.reject({status:e.status,message:`HTTP Error ${e.status}`}))))).catch((s=>(console.error(`Request to ${t.toUpperCase()} ${this._baseUrl}${e} failed: ${s.message||s.status||s}`),Promise.reject(s))))}getInitialCards(){return this._makeRequest("/cards","GET")}getUserInfo(){return this._makeRequest("/users/me","GET")}getAppData(){return Promise.all([this.getInitialCards(),this.getUserInfo()]).then((([e,t])=>({cards:e,userData:t}))).catch((e=>(console.error(`Error fetching app data: ${e}`),Promise.reject(e))))}updateUserAvatar({avatar:e}){return this._makeRequest("/users/me/avatar","PATCH",{avatar:e})}updateUserInfo(e){return this._makeRequest("/users/me","PATCH",{name:e.name,about:e.about})}createCard(e){return this._makeRequest("/cards","POST",{name:e.name,link:e.link})}deleteCard(e){return this._makeRequest(`/cards/${e}`,"DELETE")}likeCard(e){return this._makeRequest(`/cards/${e}/likes`,"PUT")}dislikeCard(e){return this._makeRequest(`/cards/${e}/likes`,"DELETE")}}document.addEventListener("DOMContentLoaded",(()=>{const C=new q({baseUrl:"https://around-api.en.tripleten-services.com/v1",authorization:"36c19769-2369-480e-9e47-1ebd87ef991a"}),I=new y("#element-image-modal"),B=new b("#profile-avatar-modal",(function(e){B.renderLoading(!0),C.updateUserAvatar(e).then((e=>{N.setUserAvatar(e),B.close(),B.renderLoading(!1)})).catch((e=>{console.error(`Error updating user avatar: ${e}`),B.renderLoading(!1)}))})),w=new b("#element-add-modal",M),T=new b("#profile-edit-modal",z),U=new k("#element-confirmation-modal");U.setEventListeners();const A=new t(L,r),$=new t(L,o),x=new t(L,c);let V;function P(e,t){I.open(e,t)}let D=null,R=null;function j(t){const s=new e(t,"#element-template",P,(()=>{D=s,R&&f.removeEventListener("click",R),R=()=>{C.deleteCard(t._id).then((()=>{D.removeCard(),U.close(),D=null})).catch((e=>console.error(`Error deleting card: ${e}`)))},f.addEventListener("click",R),U.open()}),F),r=s.generateCard();V.addItem(r)}function F(e){this.isLiked()?C.dislikeCard(e).then((e=>this.setIsLiked(e.isLiked))).catch((e=>console.error(e))):C.likeCard(e).then((e=>this.setIsLiked(e.isLiked))).catch((e=>console.error(e)))}function M(e){w.renderLoading(!0),C.createCard(e).then((e=>{j(e),w.resetForm(),w.close(),A.disableButton(),w.renderLoading(!1)})).catch((e=>{console.error(`Error creating a new card: ${e}`),w.renderLoading(!1)}))}const N=new s({nameElement:".profile__title",aboutElement:".profile__descr",avatarElement:".profile__img"});function z(e){T.renderLoading(!0),C.updateUserInfo(e).then((e=>{N.setUserInfo(e),T.close(),T.renderLoading(!1)})).catch((e=>{console.error(`Error updating user info: ${e}`),T.renderLoading(!1)}))}_.addEventListener("click",(()=>B.close())),h.addEventListener("click",(()=>{w.open(),A.resetValidation()})),p.addEventListener("click",(()=>w.close())),n.addEventListener("submit",(e=>{e.preventDefault(),M({name:v.value,link:g.value})})),i.addEventListener("click",(()=>{T.open(),$.resetValidation()})),d.addEventListener("click",(()=>T.close())),m.addEventListener("click",(()=>{B.open(),x.resetValidation()})),B.setEventListeners(),u.addEventListener("submit",(e=>{e.preventDefault(),z({name:a.value,about:l.value})})),C.getAppData().then((({cards:e,userData:t})=>{N.setUserInfo(t),N.setUserAvatar(t),V=new S({items:e,renderer:j},E),V.renderItems()})).catch((e=>console.error(`Error fetching initial data: ${e}`))),$.enableValidation(),A.enableValidation(),x.enableValidation(),x.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWlCNUUsaUJBQWlCLFNBQVMsS0FDekNvTCxFQUFhNUUsT0FDYmlGLEVBQXFCekksaUJBQWlCLElBR3hDNkIsRUFBbUI3RSxpQkFBaUIsU0FBUyxJQUFNb0wsRUFBYXpFLFVBRWhFekMsRUFBZWxFLGlCQUFpQixVQUFXOEcsSUFDekNBLEVBQU0vRCxpQkFHTnNJLEVBQW9CLENBQUV2TSxLQUZUaUcsRUFBWTJDLE1BRUcxSSxLQURmZ0csRUFBVzBDLE9BQ1csSUFHckN0RCxFQUFrQnBFLGlCQUFpQixTQUFTLEtBQzFDc0wsRUFBaUI5RSxPQUNqQmtGLEVBQXFCMUksaUJBQWlCLElBR3hDd0IsRUFBbUJ4RSxpQkFBaUIsU0FBUyxJQUFNc0wsRUFBaUIzRSxVQUVwRWpDLEVBQW9CMUUsaUJBQWlCLFNBQVMsS0FDNUNpTCxFQUFZekUsT0FDWm1GLEVBQW9CM0ksaUJBQWlCLElBR3ZDaUksRUFBWXBFLG9CQUVadEMsRUFBZ0J2RSxpQkFBaUIsVUFBVzhHLElBQzFDQSxFQUFNL0QsaUJBR053SSxFQUF3QixDQUFFek0sS0FGYnVGLEVBQWtCcUQsTUFFQy9ELE1BRGxCVyxFQUF3Qm9ELE9BQ0UsSUFHMUNxRCxFQUNHWCxhQUNBWixNQUFLLEVBQUdjLFFBQU81RyxlQUNkeUgsRUFBUzFILFlBQVlDLEdBQ3JCeUgsRUFBU3ZILGNBQWNGLEdBRXZCa0ksRUFBVyxJQUFJeEcsRUFDYixDQUNFQyxNQUFPaUYsRUFDUGhGLFNBQVVtRixHQUVaM0YsR0FFRjhHLEVBQVNqRyxhQUFhLElBRXZCc0UsT0FBTzFELEdBQVVELFFBQVFDLE1BQU0sZ0NBQWdDQSxPQUVsRW1GLEVBQXFCN0ksbUJBQ3JCNEksRUFBcUI1SSxtQkFDckI4SSxFQUFvQjlJLG1CQUNwQjhJLEVBQW9COUksa0JBQWtCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLW1haW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtbWFpbi8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy1tYWluLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy1tYWluLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLW1haW4vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtbWFpbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtbWFpbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy1tYWluLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy1tYWluLy4vc3JjL3V0aWxzL2FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLW1haW4vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVEZWxldGVCdXR0b24sIGhhbmRsZUxpa2VCdXR0b24pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rIHx8IGRhdGEudXJsOyAvLyBmaXhlZCBjYXJkIGltYWdlIG5vdCBsb2FkaW5nXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uID0gaGFuZGxlRGVsZXRlQnV0dG9uO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbF9fZWxlbWVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAvLyB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcy5faWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIC8vIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih0aGlzLl9pZCwgdGhpcy5fZWxlbWVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyTGlrZWRDYXJkcygpIHtcclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0SXNMaWtlZChpc0xpa2VkKSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VkQ2FyZHMoKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RleHQnKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgIFxyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICBcclxuICAgIHRoaXMuX3JlbmRlckxpa2VkQ2FyZHMoKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufSIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gdGhpcy5faW5wdXRMaXN0LnNvbWUoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcblxuICAgIGlmIChoYXNJbnZhbGlkSW5wdXQpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbih0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICBpZiAoIXRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcykpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVFbGVtZW50LCBhYm91dEVsZW1lbnQsIGF2YXRhckVsZW1lbnQgfSkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhckVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJBdmF0YXIodXNlckRhdGEpIHtcclxuICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgam9iOiB0aGlzLl91c2VySm9iLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBhdmF0YXI6IHRoaXMuX3VzZXJBdmF0YXIuc3JjXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsIlxyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWcnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBuZXdDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnQtYWRkLW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudEFkZEZvcm0gPSBuZXdDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50LWFkZC1mb3JtXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUNsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByb2ZpbGUtY2xvc2UtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckZvcm0gPSBwcm9maWxlQXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJNb2RhbENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1jbG9zZS1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgZWxlbWVudEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRDbG9zZUJ1dHRvbiA9IG5ld0NhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnQtYWRkLWNsb3NlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlzdFwiKTtcclxuZXhwb3J0IGNvbnN0IGVsTmFtZUlucHV0ID0gbmV3Q2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjZWxlbWVudC1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IGVsVXJsSW5wdXQgPSBuZXdDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IGVsTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgZWxlbWVudEltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnQtaW1hZ2UtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50SW1hZ2VNb2RhbENsb3NlQnV0dG9uID0gZWxlbWVudEltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50LWltYWdlLWNsb3NlXCIpO1xyXG5leHBvcnQgY29uc3QgbW9kYWxJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWxlbWVudC1tb2RhbC1pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWxlbWVudC1tb2RhbC1jYXB0aW9uXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRDb25maXJtYXRpb25Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWxlbWVudC1jb25maXJtYXRpb24tbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50RGVsZXRlQ29uZmlybWF0aW9uQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50LWNvbmZpcm1hdGlvbi1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjZWxlbWVudC10ZW1wbGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JDb25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG4gIH07XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZUNhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgICAgdXJsOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICAgIHVybDogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICAgIHVybDogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gICAgfSxcclxuICBdO1xyXG4iLCJcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBwYXJlbnRDb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fcGFyZW50Q29udGFpbmVyID0gcGFyZW50Q29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShjaGlsZEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9wYXJlbnRDb250YWluZXIucHJlcGVuZChjaGlsZEVsZW1lbnQpO1xyXG4gICAgfVxyXG59IiwiXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgUG9wdXAgY29tcG9uZW50IHRoYXQgY2FuIGJlIG9wZW5lZCBhbmQgY2xvc2VkLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgLy8gQWNjZXB0IGVpdGhlciBhIHNlbGVjdG9yIHN0cmluZyBvciBhbiBvcHRpb25zIG9iamVjdDogeyBwb3B1cFNlbGVjdG9yIH1cclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3JPck9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgcG9wdXBTZWxlY3RvciA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgcG9wdXBTZWxlY3Rvck9yT3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3JPck9wdGlvbnM7XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgcG9wdXBTZWxlY3Rvck9yT3B0aW9ucyAmJlxyXG4gICAgICAgICAgICB0eXBlb2YgcG9wdXBTZWxlY3Rvck9yT3B0aW9ucyA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgcG9wdXBTZWxlY3Rvck9yT3B0aW9ucy5wb3B1cFNlbGVjdG9yXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHBvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yT3JPcHRpb25zLnBvcHVwU2VsZWN0b3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cFNlbGVjdG9yID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKSA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3BvcHVwRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBQb3B1cCBlbGVtZW50IGZvciBzZWxlY3RvciBcIiR7cG9wdXBTZWxlY3Rvcn1cIiBub3QgZm91bmQhYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdBdHRlbXB0ZWQgdG8gb3BlbiBhIFBvcHVwIGJ1dCB0aGUgZWxlbWVudCB3YXMgbm90IGZvdW5kLiBTa2lwcGluZyBvcGVuKCkuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicG9wdXAgb3BlbmVkIVwiKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kYWxfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdBdHRlbXB0ZWQgdG8gY2xvc2UgYSBQb3B1cCBidXQgdGhlIGVsZW1lbnQgd2FzIG5vdCBmb3VuZC4gU2tpcHBpbmcgY2xvc2UoKS4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJwb3B1cCBjbG9zZWQhXCIpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3BvcHVwRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3NldEV2ZW50TGlzdGVuZXJzKCkgY2FsbGVkIGJ1dCBwb3B1cCBlbGVtZW50IHdhcyBub3QgZm91bmQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsJykgfHxcclxuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX19jbG9zZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZShldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUG9wdXAgY2xvc2VkIHZpYSBFc2NhcGUgQnV0dG9uIVwiKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9XHJcblxyXG4gIF9zdWJtaXRGb3JtID0gKGV2ZW50KSA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fc3VibWl0Rm9ybSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSAnU2F2aW5nLi4uJykge1xyXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uJyk7XHJcblxyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9idXR0b25UZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblRleHQ7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRGb3JtKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2ltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jYXB0aW9uLWVsZW1lbnQnKTtcclxuICAgICAgICB0aGlzLl9pbWFnZU1vZGFsVmlldyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltYWdlLWVsZW1lbnQnKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGNhcHRpb24sIGltYWdlVXJsKSB7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VNb2RhbFZpZXcuc3JjID0gaW1hZ2VVcmw7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VNb2RhbFZpZXcuYWx0ID0gY2FwdGlvbjtcclxuICAgICAgICB0aGlzLl9pbWFnZVRpdGxlLnRleHRDb250ZW50ID0gY2FwdGlvbjtcclxuXHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9hdXRoVG9rZW4gPSBvcHRpb25zLmF1dGhvcml6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Kn0gcGF0aCB0aGUgZW5kcG9pbnQgcGF0aFxyXG4gICAgICogQHBhcmFtIHsqfSBtZXRob2QgdGhlIEhUVFAgbWV0aG9kIChHRVQsIFBPU1QsIFBBVENILCBERUxFVEUpXHJcbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgdGhlIGRhdGEgdG8gYmUgc2VudCBpbiB0aGUgcmVxdWVzdCBib2R5IChmb3IgUE9TVCBhbmQgUEFUQ0gpXHJcbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgcmVzcG9uc2UgZGF0YVxyXG4gICAgICogQGRlc2NyaXB0aW9uIFRoaXMgbWV0aG9kIG1ha2VzIGEgcmVxdWVzdCB0byB0aGUgQVBJIHdpdGggdGhlIHNwZWNpZmllZCBwYXRoLCBtZXRob2QsIGFuZCBkYXRhLlxyXG4gICAgICovXHJcbiAgICBfbWFrZVJlcXVlc3QocGF0aCwgbWV0aG9kLCBkYXRhID0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XHJcbiAgICAgICAgICAgIGNvbmZpZy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0ke3BhdGh9YCwgY29uZmlnKVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBlcnJvciBkZXRhaWxzIGZyb20gcmVzcG9uc2UgYm9keVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihlcnJEYXRhID0+IFByb21pc2UucmVqZWN0KHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzLnN0YXR1cywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVyckRhdGEubWVzc2FnZSB8fCBlcnJEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBlcnJEYXRhIFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBQcm9taXNlLnJlamVjdCh7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlcy5zdGF0dXMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSFRUUCBFcnJvciAke3Jlcy5zdGF0dXN9YCBcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUmVxdWVzdCB0byAke21ldGhvZC50b1VwcGVyQ2FzZSgpfSAke3RoaXMuX2Jhc2VVcmx9JHtwYXRofSBmYWlsZWQ6ICR7ZXJyLm1lc3NhZ2UgfHwgZXJyLnN0YXR1cyB8fCBlcnJ9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi9jYXJkc1wiLCBcIkdFVFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXCIvdXNlcnMvbWVcIiwgXCJHRVRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXBwRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pXHJcbiAgICAgICAgICAgIC50aGVuKChbY2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgY2FyZHMsIHVzZXJEYXRhIH07XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgYXBwIGRhdGE6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi91c2Vycy9tZS9hdmF0YXJcIiwgXCJQQVRDSFwiLCB7IGF2YXRhciB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVc2VySW5mbyh1c2VyRGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi91c2Vycy9tZVwiLCBcIlBBVENIXCIsIHtcclxuICAgICAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgICAgICAgYWJvdXQ6IHVzZXJEYXRhLmFib3V0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi9jYXJkc1wiLCBcIlBPU1RcIiwge1xyXG4gICAgICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxyXG4gICAgICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH1gLCBcIkRFTEVURVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCBcIlBVVFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCBcIkRFTEVURVwiKTtcclxuICAgIH1cclxufSIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBmb3JtVmFsaWRhdG9yQ29uZmlnLFxuICBwcm9maWxlRWRpdE1vZGFsLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZUF2YXRhckJ1dHRvbixcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuICBwcm9maWxlRWRpdEZvcm0sXG4gIG5ld0NhcmRNb2RhbCxcbiAgZWxlbWVudEFkZEJ1dHRvbixcbiAgZWxlbWVudENsb3NlQnV0dG9uLFxuICBwcm9maWxlQ2xvc2VCdXR0b24sXG4gIGVsZW1lbnRBZGRGb3JtLFxuICBlbGVtZW50TGlzdCxcbiAgZWxOYW1lSW5wdXQsXG4gIGVsVXJsSW5wdXQsXG4gIHByb2ZpbGVBdmF0YXJNb2RhbCxcbiAgcHJvZmlsZUF2YXRhck1vZGFsQ2xvc2VCdXR0b24sXG4gIGVsZW1lbnREZWxldGVDb25maXJtYXRpb25CdXR0b24sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL3V0aWxzL2FwaS5qc1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICAgIGF1dGhvcml6YXRpb246IFwiMzZjMTk3NjktMjM2OS00ODBlLTllNDctMWViZDg3ZWY5OTFhXCIsXG4gIH0pO1xuXG4gIGNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjZWxlbWVudC1pbWFnZS1tb2RhbFwiKTtcbiAgY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWF2YXRhci1tb2RhbFwiLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcbiAgY29uc3QgcG9wdXBOZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjZWxlbWVudC1hZGQtbW9kYWxcIiwgaGFuZGxlTmV3Q2FyZFN1Ym1pdCk7XG4gIGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuICBjb25zdCBwb3B1cERlbGV0ZUNhcmRDb25maXJtYXRpb24gPSBuZXcgUG9wdXAoXCIjZWxlbWVudC1jb25maXJtYXRpb24tbW9kYWxcIik7XG4gIHBvcHVwRGVsZXRlQ2FyZENvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGNvbnN0IG5ld0NhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gICAgZm9ybVZhbGlkYXRvckNvbmZpZyxcbiAgICBuZXdDYXJkTW9kYWxcbiAgKTtcblxuICBjb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGZvcm1WYWxpZGF0b3JDb25maWcsXG4gICAgcHJvZmlsZUVkaXRNb2RhbFxuICApO1xuXG4gIGNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgICBmb3JtVmFsaWRhdG9yQ29uZmlnLFxuICAgIHByb2ZpbGVBdmF0YXJNb2RhbFxuICApO1xuXG4gIGxldCBjYXJkTGlzdDtcblxuICBmdW5jdGlvbiBoYW5kbGVQaWN0dXJlUG9wdXAobmFtZSwgbGluaykge1xuICAgIHBvcHVwSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcbiAgfVxuXG4gIGxldCBjYXJkVG9EZWxldGUgPSBudWxsO1xuICBsZXQgZGVsZXRlSGFuZGxlciA9IG51bGw7XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgIGNhcmREYXRhLFxuICAgICAgXCIjZWxlbWVudC10ZW1wbGF0ZVwiLFxuICAgICAgaGFuZGxlUGljdHVyZVBvcHVwLFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBTdG9yZSB0aGUgY2FyZCByZWZlcmVuY2UgZm9yIGRlbGV0aW9uXG4gICAgICAgIGNhcmRUb0RlbGV0ZSA9IGNhcmQ7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgcHJldmlvdXMgZXZlbnQgbGlzdGVuZXIgaWYgaXQgZXhpc3RzXG4gICAgICAgIGlmIChkZWxldGVIYW5kbGVyKSB7XG4gICAgICAgICAgZWxlbWVudERlbGV0ZUNvbmZpcm1hdGlvbkJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBuZXcgaGFuZGxlciBmb3IgdGhpcyBzcGVjaWZpYyBjYXJkXG4gICAgICAgIGRlbGV0ZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkRGF0YS5faWQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmRUb0RlbGV0ZS5yZW1vdmVDYXJkKCk7XG4gICAgICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZENvbmZpcm1hdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICBjYXJkVG9EZWxldGUgPSBudWxsO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGNhcmQ6ICR7ZXJyb3J9YCkpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyIHRvIFwiWWVzXCIgYnV0dG9uIG9ubHlcbiAgICAgICAgZWxlbWVudERlbGV0ZUNvbmZpcm1hdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlSGFuZGxlcik7XG4gICAgICAgIFxuICAgICAgICAvLyBPcGVuIHRoZSBjb25maXJtYXRpb24gbW9kYWxcbiAgICAgICAgcG9wdXBEZWxldGVDYXJkQ29uZmlybWF0aW9uLm9wZW4oKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVMaWtlQnV0dG9uXG4gICAgKTtcblxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUxpa2VCdXR0b24oY2FyZElkKSB7XG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XG4gICAgICBhcGlcbiAgICAgICAgLmRpc2xpa2VDYXJkKGNhcmRJZClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5zZXRJc0xpa2VkKHJlcy5pc0xpa2VkKSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGlcbiAgICAgICAgLmxpa2VDYXJkKGNhcmRJZClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5zZXRJc0xpa2VkKHJlcy5pc0xpa2VkKSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZU5ld0NhcmRTdWJtaXQoY2FyZERhdGEpIHtcbiAgICBwb3B1cE5ld0NhcmQucmVuZGVyTG9hZGluZyh0cnVlKTtcblxuICAgIGFwaVxuICAgICAgLmNyZWF0ZUNhcmQoY2FyZERhdGEpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNyZWF0ZUNhcmQocmVzKTtcbiAgICAgICAgcG9wdXBOZXdDYXJkLnJlc2V0Rm9ybSgpO1xuICAgICAgICBwb3B1cE5ld0NhcmQuY2xvc2UoKTtcbiAgICAgICAgbmV3Q2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgICBwb3B1cE5ld0NhcmQucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBhIG5ldyBjYXJkOiAke2Vycm9yfWApO1xuICAgICAgICBwb3B1cE5ld0NhcmQucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICBuYW1lRWxlbWVudDogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgICBhYm91dEVsZW1lbnQ6IFwiLnByb2ZpbGVfX2Rlc2NyXCIsXG4gICAgYXZhdGFyRWxlbWVudDogXCIucHJvZmlsZV9faW1nXCIsXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHVzZXJEYXRhKSB7XG4gICAgcG9wdXBFZGl0UHJvZmlsZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuXG4gICAgYXBpXG4gICAgICAudXBkYXRlVXNlckluZm8odXNlckRhdGEpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nIHVzZXIgaW5mbzogJHtlcnJvcn1gKTtcbiAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdChhdmF0YXJEYXRhKSB7XG4gICAgcG9wdXBBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcblxuICAgIGFwaVxuICAgICAgLnVwZGF0ZVVzZXJBdmF0YXIoYXZhdGFyRGF0YSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMpO1xuICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xuICAgICAgICBwb3B1cEF2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nIHVzZXIgYXZhdGFyOiAke2Vycm9yfWApO1xuICAgICAgICBwb3B1cEF2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJvZmlsZUF2YXRhck1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwQXZhdGFyLmNsb3NlKCkpO1xuXG4gIGVsZW1lbnRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cE5ld0NhcmQub3BlbigpO1xuICAgIG5ld0NhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9KTtcblxuICBlbGVtZW50Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwTmV3Q2FyZC5jbG9zZSgpKTtcblxuICBlbGVtZW50QWRkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgbmFtZSA9IGVsTmFtZUlucHV0LnZhbHVlO1xuICAgIGNvbnN0IGxpbmsgPSBlbFVybElucHV0LnZhbHVlO1xuICAgIGhhbmRsZU5ld0NhcmRTdWJtaXQoeyBuYW1lLCBsaW5rIH0pO1xuICB9KTtcblxuICBwcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xuICAgIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9KTtcblxuICBwcm9maWxlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKSk7XG5cbiAgcHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcbiAgICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9KTtcbiAgXG4gIHBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgcHJvZmlsZUVkaXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBuYW1lID0gcHJvZmlsZVRpdGxlSW5wdXQudmFsdWU7XG4gICAgY29uc3QgYWJvdXQgPSBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCh7IG5hbWUsIGFib3V0IH0pO1xuICB9KTtcblxuICBhcGlcbiAgICAuZ2V0QXBwRGF0YSgpXG4gICAgLnRoZW4oKHsgY2FyZHMsIHVzZXJEYXRhIH0pID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTsgLy8gc2F2ZXMgdXNlciBuYW1lICYgZGVzY3JpcHRpb25cbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEpOyAvLyBzdXBwb3NlZCB0byBzYXZlIHVzZXIgYXZhdGFyIVxuXG4gICAgICBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgICAgICB7XG4gICAgICAgICAgaXRlbXM6IGNhcmRzLFxuICAgICAgICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxuICAgICAgICB9LFxuICAgICAgICBlbGVtZW50TGlzdFxuICAgICAgKTtcbiAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7IC8vIGZpeGVkIGNhcmRzIG5vdCBsb2FkaW5nXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBpbml0aWFsIGRhdGE6ICR7ZXJyb3J9YCkpO1xuXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgbmV3Q2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUJ1dHRvbiIsImhhbmRsZUxpa2VCdXR0b24iLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwidXJsIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2lkIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudCIsIl9jYXJkSW1hZ2UiLCJyZW1vdmVDYXJkIiwicmVtb3ZlIiwiX3JlbmRlckxpa2VkQ2FyZHMiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRJc0xpa2VkIiwiZ2VuZXJhdGVDYXJkIiwidGV4dENvbnRlbnQiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwic29tZSIsImRpc2FibGVCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiY29udGFpbnMiLCJVc2VySW5mbyIsIm5hbWVFbGVtZW50IiwiYWJvdXRFbGVtZW50IiwiYXZhdGFyRWxlbWVudCIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXQiLCJfdXNlckF2YXRhciIsInNldFVzZXJJbmZvIiwidXNlckRhdGEiLCJhYm91dCIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJnZXRVc2VySW5mbyIsImpvYiIsIl91c2VySm9iIiwibmV3Q2FyZE1vZGFsIiwiZWxlbWVudEFkZEZvcm0iLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZUNsb3NlQnV0dG9uIiwicHJvZmlsZUF2YXRhck1vZGFsIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsInByb2ZpbGVBdmF0YXJNb2RhbENsb3NlQnV0dG9uIiwiZWxlbWVudEFkZEJ1dHRvbiIsImVsZW1lbnRDbG9zZUJ1dHRvbiIsImVsZW1lbnRMaXN0IiwiZWxOYW1lSW5wdXQiLCJlbFVybElucHV0IiwiZWxlbWVudERlbGV0ZUNvbmZpcm1hdGlvbkJ1dHRvbiIsImZvcm1WYWxpZGF0b3JDb25maWciLCJmb3JtU2VsZWN0b3IiLCJTZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsInBhcmVudENvbnRhaW5lciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9wYXJlbnRDb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiY2hpbGRFbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3Rvck9yT3B0aW9ucyIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImNvbnNvbGUiLCJlcnJvciIsIm9wZW4iLCJsb2ciLCJ3YXJuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldmVudCIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJrZXkiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2Zvcm1JbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfc3VibWl0Rm9ybSIsInJlc2V0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0Iiwic3VibWl0QnV0dG9uIiwiX2J1dHRvblRleHQiLCJyZXNldEZvcm0iLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZVRpdGxlIiwiX2ltYWdlTW9kYWxWaWV3IiwiY2FwdGlvbiIsImltYWdlVXJsIiwiQXBpIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJhdXRob3JpemF0aW9uIiwiX21ha2VSZXF1ZXN0IiwicGF0aCIsIm1ldGhvZCIsImNvbmZpZyIsInRvVXBwZXJDYXNlIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiZXJyRGF0YSIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJtZXNzYWdlIiwiY2F0Y2giLCJlcnIiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRBcHBEYXRhIiwiYWxsIiwiY2FyZHMiLCJ1cGRhdGVVc2VyQXZhdGFyIiwidXBkYXRlVXNlckluZm8iLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCIsImFwaSIsInBvcHVwSW1hZ2UiLCJwb3B1cEF2YXRhciIsImF2YXRhckRhdGEiLCJ1c2VySW5mbyIsInBvcHVwTmV3Q2FyZCIsImhhbmRsZU5ld0NhcmRTdWJtaXQiLCJwb3B1cEVkaXRQcm9maWxlIiwiaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQiLCJwb3B1cERlbGV0ZUNhcmRDb25maXJtYXRpb24iLCJuZXdDYXJkRm9ybVZhbGlkYXRvciIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsImNhcmRMaXN0IiwiaGFuZGxlUGljdHVyZVBvcHVwIiwiY2FyZFRvRGVsZXRlIiwiZGVsZXRlSGFuZGxlciIsImNhcmQiLCJjYXJkRWxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=